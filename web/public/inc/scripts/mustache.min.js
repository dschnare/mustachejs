/*
 Author: Darren Schnare
 Keywords: javascript,mustache,template
 License: MIT ( http://www.opensource.org/licenses/mit-license.php )
 Repo: https://github.com/dschnare/mustachejs
*/
var n=void 0,q=null;
(function(){function w(c){var g=x(c),e=function(){var d=[];return{s:function(){return 0!==d.length},open:function(e){d.push(e)},close:function(e){var a=d[d.length-1];if(this.s()&&a.value===e.value)a.n=e,d.pop();else throw Error('Missing section-begin for : "'+e.text+'" on line '+e.i);},w:function(){return d[d.length-1]}}}();return{A:function(){return e.s()},z:function(){return e.w()},next:function(d){var c=g.next(d),a;if(c)switch(c.type){case "set-delimiter":if(c.value&&0>c.value.indexOf("=")){a=c.value.split(" ");
d=a[0];a=a[1];if(0<=d.indexOf(" ")||0<=a.indexOf(" "))throw Error('Unexpected whitespace in set-delimiter token : "'+c.text+'" on line '+c.i);c.left=d;c.right=a}else throw Error('Invalid set-delimiter token : "'+c.text+'" on line '+c.i);break;case "section-begin":case "invert-section-begin":e.open(c);for(a=g.next(d);a;){switch(a.type){case "section-begin":case "invert-section-begin":e.open(a);break;case "section-end":e.close(a)}if(c.n)break;a=g.next(d)}break;case "section-end":e.close(c)}return c}}}
function s(c){function g(d,a){function f(){return arguments.length?d.apply(a,arguments):d.call(a)}f.valueOf=d.valueOf===f.valueOf?f.valueOf:function(){return d.valueOf()};f.toString=d.toString===f.toString?f.toString:function(){return d.toString()};f.t=d;f.M=a;return f}var e=[{}],d={g:function(){return e[e.length-1]},stack:function(){return e},get:function(d){for(var a=e.length,f,b,o;a;)if(a-=1,f=e[a],b=f[d],b!==n){o="function"===typeof b?g(b,f):b;break}return o},push:function(d){e.push(d);return d},
pop:function(){1!==e.length&&e.pop();return this.g()}};1===arguments.length&&d.push(c);return d}function y(c){function g(d){return{value:+d,toString:function(){return this.value.toString()},valueOf:function(){return this.value}}}var c=c+"",e=[];e.update=function(d,c,a){for(var f=this.length,b=q,a=a-(c-d);f;)f-=1,b=this[f],b>=c&&(b.value+=a)};return{length:c.length,charAt:function(d){return c.charAt(+d)},substr:function(d,e){return c.substr(+d,e)},substring:function(d,e){return c.substring(+d,+e)},
replace:function(d){var g=d.substr?c.indexOf(d.substr):+d.f,a=d.substr?g+d.substr.length:+d.end,d=d.j===n?"":d.j.toString();c=c.substring(0,g)+d+c.substring(a);e.update(g,a,d.length);this.length=c.length},p:function(d){d=g(d);e.push(d);return d},I:function(){for(;e.length;)e.pop()},L:function(){for(;e.length;)e.pop().value=-1},indexOf:function(d,m){var a=g(c.indexOf(d,+m));0<=a&&e.push(a);return a},lastIndexOf:function(d,m){var a=g(c.lastIndexOf(d,+m));0<=a&&e.push(a);return a},toString:function(){return c},
valueOf:function(){return c}}}var r={isArray:function(){var c={}.constructor.prototype.toString;return function(g){return"[object Array]"===c.call(g)}}(),B:function(){var c={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"};return function(g){for(var e=g.length,d=q,d=q;e;)e-=1,d=g.charAt(e),(d=c[d])&&(g=g.substring(0,e)+d+g.substring(e+1));return g}}(),trim:function(c){for(var g=0,e=c.charAt(g);e;){if(" "<e){c=c.substring(g);break}g+=1;e=c.charAt(g)}for(g=c.length;g;)if(g-=1,e=c.charAt(g),
" "<e){c=c.substring(0,g+1);break}return c},D:function(c,g){for(var e=c.length,d=q;e;)if(e-=1,d=c.charAt(e),("\n"===d||"\r"===d)&&"\n"!==c.charAt(e+1))c.charAt(e+1)&&(c=c.substring(0,e+1)+g+c.substring(e+1));return c?g+c:c}},x=function(){function c(c){function d(b){0!==b&&(a.value+=b||1,f=c.charAt(+a));return f}var m="function"===typeof c.p?function(a){return c.p(a)}:function(a){return{value:a,toString:function(){return this.value.toString()},valueOf:function(){return this.value}}},a=m(-1),f=q,b=
1;return{position:function(b){b=+b;isFinite(b)&&(a.value=b);return+a},K:function(f){var d=a.value,c=b,e,g=[];b=1;a.value=0;for(e=this.next(f);e;)g.push(e),e=this.next(f);b=c;a.value=d;return g},next:function(o){o||(o={left:"{{",right:"}}"});var k="",i="",h=-1,j=q,l=q,t=o.left,p=t.length,o=o.right,u=o.length;0<a&&(a.value-=1);for(;d();)if("\n"===f?"\r"!==c.charAt(a-1)&&(b+=1):"\r"===f&&(b+=1),c.substr(+a,p)===t){h=+a;d(p);switch(f){case "=":case "!":case "&":case "~":case "{":case "#":case "^":case "/":case ">":case "@":i=
f;break;case ".":i=k=f;break;default:k+=f}for(;d();)if(!("{"===i&&"}}"===o&&"}}}"===c.substr(+a,3)))if(c.substr(+a,u)===o){d(u);break}else k+=f;"="===i&&(k=k.substring(0,k.length-1));if("."===i&&k!==i)k=i="";else if(j=g[i]){l={type:j,value:r.trim(k),text:c.substring(h,+a),start:m(h),end:m(+a),i:b};break}else k=i=""}else{for(h=+a;f&&c.substr(+a,p)!==t;)d();l={type:"text",value:c.substring(h,a),text:c.substring(h,a),start:m(h),end:m(+a),i:b};if(l.text)break;else l=q}return l}}}var g={"!":"comment",
"=":"set-delimiter","":"interpolation","&":"unescape-interpolation","~":"unescape-interpolation","{":"unescape-interpolation","#":"section-begin","^":"invert-section-begin","/":"section-end",">":"partial","@":"partial",".":"implicit"};c.J=function(){return{left:"{{",right:"}}"}};return c}(),z=function(){var c,g={}.valueOf,e={m:function(a){for(var f=a.name,b=f.split("."),d=0,c=b.length,a=a.a,d=0;d<c-1;d+=1)f=b[d],f=a.get(f),f===n?d=c:(f&&"function"===typeof f.valueOf&&f.valueOf!==g?f=f.valueOf():"function"===
typeof f&&(f=f()),a=s(f));f=b[c-1];f=a.get(f);f===n?f="":f&&"function"===typeof f.valueOf&&f.valueOf!==g?f=f.valueOf():"function"===typeof f&&(f=f());return f},q:function(a){function f(a,b){return c.e({c:a,data:b||j,d:i,b:h,a:e})}for(var b=a.name,d=a.r,e=a.a,i=a.d,h=a.b,j=e.g(),a=b.split("."),l=0,m=a.length,p=e,d=d.toString(),l=0;l<m-1;l+=1)b=a[l],b=p.get(b),b===n?(b="",l=m):(b&&"function"===typeof b.valueOf&&b.valueOf!==g?b=b.valueOf():"function"===typeof b&&(b=1<=b.t.length?b(d,f):b()),p=s(b));
b=a[m-1];b=p.get(b);b===n?b="":b&&"function"===typeof b.valueOf&&b.valueOf!==g?b=b.valueOf():"function"===typeof b&&(b=b(d,f));return b},o:function(a){function f(a,b){return c.e({c:a,data:b||j,d:i,b:h,a:e})}for(var b=a.name,d=a.r,e=a.a,i=a.d,h=a.b,j=e.g(),a=b.split("."),l=0,m=a.length,p=e,d=d.toString(),l=0;l<m-1;l+=1)b=a[l],b=p.get(b),b===n?(b="",l=m):(b&&"function"===typeof b.valueOf&&b.valueOf!==g?b=b.valueOf():"function"===typeof b&&(b=1<=b.t.length?b(d,f):b()),p=s(b));b=a[m-1];b=p.get(b);b===
n?b="":"function"===typeof b&&(b=!0);return b}},d={l:function(a,d){for(var b=d.start-1,c=a.charAt(b),e=!0,g=0,h="";c;){if(" "<c){e=!1;break}else if("\n"===c||"\r"===c)break;b-=1;c=a.charAt(b)}g=b+1;if(e){b=a.p(d.end);for(c=a.charAt(b);c;){if(" "<c){e=!1;break}else if("\n"===c||"\r"===c){"\r"===c&&"\n"===a.charAt(b+1)&&(b.value+=1);break}b.value+=1;c=a.charAt(b)}e&&(h=a.substring(g,d.start),a.replace({f:g,end:d.start}),a.replace({f:d.end,end:b+1}))}return h},k:function(a,d,b){a.replace({f:d.start.value,
end:d.end.value,j:b||""})},v:function(a,c,b){d.l(a,c);a.replace({f:c.start.value,end:c.end.value,j:b||""})},u:function(a){var d=a.c,b=a.data,e=a.d,k=a.a,a=a.b,i=0,h=0,j="",l=q,m=!1;r.isArray(b)||(b=b?[b]:[]);h=b.length;for(i=0;i<h;i+=1)l=b[i],m=!1,k.push(l),l&&"function"===typeof l.valueOf&&l.valueOf!==g&&(m=!0,l=l.valueOf(),k.push(l)),"function"===typeof l&&(m=!0,l=l(),k.push(l)),l=c.e({c:"="+d+"=",data:l,a:k,b:a,d:e}),j+=l.substring(1,l.length-1),k.pop(),m&&k.pop();return j}},m={C:function(a){var f=
a.c,b=a.h,e=a.data,g=a.a,a=a.b,e=c.e({c:"function"===typeof e?e():e,data:g.g(),a:g,b:a});d.k(f,b,e)},G:function(a){var c=a.c,b=a.h,a=a.d;a.left=b.left;a.right=b.right;d.v(c,b)},m:function(a){var f=a.c,b=a.h,g=a.a,a=a.b,k=e.m({name:b.value,a:g,b:a});(k=c.e({c:k,data:g.g(),a:g,b:a}))?(k=r.B(k.toString()),d.k(f,b,k)):d.k(f,b)},H:function(a){var f=a.c,b=a.h,g=a.a,a=a.b,k=e.m({name:b.value,a:g,b:a});(k=c.e({c:k,data:g.g(),a:g,b:a}))?d.k(f,b,k+""):d.k(f,b)},F:function(a){var f=a.c,b=a.h,e=a.data,g=a.a,
a=a.b,i="",h=d.l(f,b),j=a[b.value];j&&(j=j.toString(),h&&(j=r.D(j,h)),i=c.e({c:j,data:e,a:g,b:a}));d.k(f,b,i)},q:function(a){var f=a.c,b=a.h,g=a.a,k=a.b,a=a.d,i=b.n,h=q,j=q;d.l(f,i);d.l(f,b);h=f.substring(b.start+b.text.length,i.end-i.text.length);j=e.q({name:b.value,r:h,a:g,d:a,b:k});"string"===typeof j?(j=c.e({c:j,data:g.g(),a:g,d:a,b:k}),f.replace({f:b.start,end:i.end,j:j})):!j||r.isArray(j)&&!j.length?f.replace({f:b.start,end:i.end}):f.replace({f:b.start,end:i.end,j:d.u({c:h,data:j,a:g,b:k,d:a})})},
o:function(a){var c=a.c,b=a.h,g=a.a,k=a.b,a=a.d,i=b.n,h=q,j=q;d.l(c,i);d.l(c,b);h=c.substring(b.start+b.text.length,i.end-i.text.length);j=e.o({name:b.value,r:h,d:a,b:k,a:g});j=!j||r.isArray(j)&&!j.length?!0:!1;!j||r.isArray(j)&&!j.length?c.replace({f:b.start,end:i.end}):c.replace({f:b.start,end:i.end,j:d.u({c:h,data:j,a:g,b:k,d:a})})}};c={e:function(a){var c=y(a.c?a.c.toString():""),b=a.b||{},e=a.data||{},g=w(c),i=a.d||{left:"{{",right:"}}"},a=a.a||s(),h=q,b={c:c,data:e,a:a,b:b,d:i};a.push(e);for(h=
g.next(i);h;){b.h=h;switch(h.type){case "implicit":m.C(b);break;case "comment":d.v(c,h);break;case "set-delimiter":m.G(b);break;case "interpolation":m.m(b);break;case "unescape-interpolation":m.H(b);break;case "partial":m.F(b);break;case "section-begin":m.q(b);break;case "invert-section-begin":m.o(b);break;case "text":break;default:throw Error('Unexpected token: "'+h.text+'" on line '+h.i);}h=g.next(i)}if(g.A())throw h=g.z(),Error('Missing section-end for : "'+h.text+'" on line '+h.i);a.pop();return c.toString()}};
return function(){return{e:function(a,d,b,e){return c.e({c:a,data:d,b:b,d:e})}}}}(),v={render:function(c,g,e,d){return z().e(c,g,e,d)}};xport.module(v,function(){xport("MUSTACHE",v)})})();
