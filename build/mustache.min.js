/*
 Author: Darren Schnare
 Keywords: javascript,mustache,template
 License: MIT ( http://www.opensource.org/licenses/mit-license.php )
 Repo: https://github.com/dschnare/mustachejs
*/
var o=void 0,s=!0,u=null;
(function(){function y(f){var h=A(f),e=function(){var c=[];return{t:function(){return 0!==c.length},open:function(g){c.push(g)},close:function(g){var d=c[c.length-1];if(this.t()&&d.value===g.value)d.n=g,c.pop();else throw Error('Missing section-begin for : "'+g.text+'" on line '+g.i);},z:function(){return c[c.length-1]}}}();return{B:function(){return e.t()},A:function(){return e.z()},next:function(c){var g=h.next(c),d;if(g)switch(g.type){case "set-delimiter":if(g.value&&0>g.value.indexOf("=")){d=
g.value.split(" ");c=d[0];d=d[1];if(0<=c.indexOf(" ")||0<=d.indexOf(" "))throw Error('Unexpected whitespace in set-delimiter token : "'+g.text+'" on line '+g.i);g.left=c;g.right=d}else throw Error('Invalid set-delimiter token : "'+g.text+'" on line '+g.i);break;case "section-begin":case "invert-section-begin":e.open(g);for(d=h.next(c);d;){switch(d.type){case "section-begin":case "invert-section-begin":e.open(d);break;case "section-end":e.close(d)}if(g.n)break;d=h.next(c)}break;case "section-end":e.close(g)}return g}}}
function v(f){function h(c,d){function a(){return arguments.length?c.apply(d,arguments):c.call(d)}a.valueOf=c.valueOf===a.valueOf?a.valueOf:function(){return c.valueOf()};a.toString=c.toString===a.toString?a.toString:function(){return c.toString()};a.u=c;a.O=d;return a}var e=[{}],c={e:function(){return e[e.length-1]},stack:function(){return e},get:function(c){for(var d=e.length,a,i,b;d;)if(d-=1,a=e[d],i=a[c],i!==o){b="function"===typeof i?h(i,a):i;break}return b},push:function(c){e.push(c);return c},
pop:function(){1!==e.length&&e.pop();return this.e()}};1===arguments.length&&c.push(f);return c}function B(f){function h(c){return{value:+c,toString:function(){return this.value.toString()},valueOf:function(){return this.value}}}var f=f+"",e=[];e.update=function(c,e,d){for(var a=this.length,i=u,d=d-(e-c);a;)a-=1,i=this[a],i>=e&&(i.value+=d)};return{length:f.length,charAt:function(c){return f.charAt(+c)},substr:function(c,e){return f.substr(+c,e)},substring:function(c,e){return f.substring(+c,+e)},
replace:function(c){var g=c.substr?f.indexOf(c.substr):+c.g,d=c.substr?g+c.substr.length:+c.end,c=c.j===o?"":c.j.toString();f=f.substring(0,g)+c+f.substring(d);e.update(g,d,c.length);this.length=f.length},r:function(c){c=h(c);e.push(c);return c},K:function(){for(;e.length;)e.pop()},N:function(){for(;e.length;)e.pop().value=-1},indexOf:function(c,g){var d=h(f.indexOf(c,+g));0<=d&&e.push(d);return d},lastIndexOf:function(c,g){var d=h(f.lastIndexOf(c,+g));0<=d&&e.push(d);return d},toString:function(){return f},
valueOf:function(){return f}}}var t={isArray:function(){var f={}.constructor.prototype.toString;return function(h){return"[object Array]"===f.call(h)}}(),C:function(){var f={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"};return function(h){for(var e=h.length,c=u,c=u;e;)e-=1,c=h.charAt(e),(c=f[c])&&(h=h.substring(0,e)+c+h.substring(e+1));return h}}(),trim:function(f){for(var h=0,e=f.charAt(h);e;){if(" "<e){f=f.substring(h);break}h+=1;e=f.charAt(h)}for(h=f.length;h;)if(h-=1,e=f.charAt(h),
" "<e){f=f.substring(0,h+1);break}return f},F:function(f,h){for(var e=f.length,c=u;e;)if(e-=1,c=f.charAt(e),("\n"===c||"\r"===c)&&"\n"!==f.charAt(e+1))f.charAt(e+1)&&(f=f.substring(0,e+1)+h+f.substring(e+1));return f?h+f:f}},A=function(){function f(e){function c(b){0!==b&&(d.value+=b||1,a=e.charAt(+d));return a}var g="function"===typeof e.r?function(b){return e.r(b)}:function(b){return{value:b,toString:function(){return this.value.toString()},valueOf:function(){return this.value}}},d=g(-1),a=u,i=
1;return{position:function(b){b=+b;isFinite(b)&&(d.value=b);return+d},M:function(b){var a=d.value,c=i,e,k=[];i=1;d.value=0;for(e=this.next(b);e;)k.push(e),e=this.next(b);i=c;d.value=a;return k},next:function(b){b||(b={left:"{{",right:"}}"});var n="",p="",f=-1,k=u,j=u,l=b.left,m=l.length,b=b.right,r=b.length;0<d&&(d.value-=1);for(;c();)if("\n"===a?"\r"!==e.charAt(d-1)&&(i+=1):"\r"===a&&(i+=1),e.substr(+d,m)===l){f=+d;c(m);switch(a){case "=":case "!":case "&":case "~":case "{":case "#":case "^":case "/":case ">":case "@":p=
a;break;case ".":p=n=a;break;default:n+=a}for(;c();)if(!("{"===p&&"}}"===b&&"}}}"===e.substr(+d,3)))if(e.substr(+d,r)===b){c(r);break}else n+=a;"="===p&&(n=n.substring(0,n.length-1));if("."===p&&n!==p)n=p="";else if(k=h[p]){j={type:k,value:t.trim(n),text:e.substring(f,+d),start:g(f),end:g(+d),i:i};break}else n=p=""}else{for(f=+d;a&&e.substr(+d,m)!==l;)c();j={type:"text",value:e.substring(f,d),text:e.substring(f,d),start:g(f),end:g(+d),i:i};if(j.text)break;else j=u}return j}}}var h={"!":"comment",
"=":"set-delimiter","":"interpolation","&":"unescape-interpolation","~":"unescape-interpolation","{":"unescape-interpolation","#":"section-begin","^":"invert-section-begin","/":"section-end",">":"partial","@":"partial",".":"implicit"};f.L=function(){return{left:"{{",right:"}}"}};return f}(),w=function(){function f(){return{f:function(a,i,b,c){return h.f({c:a,data:i,b:b,d:c})}}}var h,e={}.valueOf,c={m:function(a){for(var i=a.name,b=i.split("."),c=0,d=b.length,a=a.a,c=0;c<d-1;c+=1)i=b[c],i=a.get(i),
i===o?c=d:(i&&"function"===typeof i.valueOf&&i.valueOf!==e?i=i.valueOf():"function"===typeof i&&(i=i()),a=v(i));i=b[d-1];i=a.get(i);i===o?i="":i&&"function"===typeof i.valueOf&&i.valueOf!==e?i=i.valueOf():"function"===typeof i&&(i=i());return i},p:function(a){function i(b,a){return h.f({c:b,data:a||g,d:f,b:k,a:d})}for(var b=a.name,c=a.q,d=a.a,f=a.d,k=a.b,g=d.e(),l=b.split("."),m=0,r=l.length,x=d,c=c.toString(),m=0;m<r-1;m+=1)b=l[m],b=x.get(b),b===o?(b="",m=r):(b&&"function"===typeof b.valueOf&&b.valueOf!==
e?b=b.valueOf():"function"===typeof b&&(b=1<=b.u.length?b(c,i):b()),x=v(b));b=l[r-1];b=x.get(b);b===o?b="":b&&"function"===typeof b.valueOf&&b.valueOf!==e?b=b.valueOf():"function"===typeof b&&(a.result&&(a.result.G=s),b=b(c,i));return b},o:function(a){function c(b,a){return h.f({c:b,data:a||j,d:g,b:k,a:f})}for(var b=a.name,d=a.q,f=a.a,g=a.d,k=a.b,j=f.e(),a=b.split("."),l=0,m=a.length,r=f,d=d.toString(),l=0;l<m-1;l+=1)b=a[l],b=r.get(b),b===o?(b="",l=m):(b&&"function"===typeof b.valueOf&&b.valueOf!==
e?b=b.valueOf():"function"===typeof b&&(b=1<=b.u.length?b(d,c):b()),r=v(b));b=a[m-1];b=r.get(b);b===o?b="":"function"===typeof b&&(b=s);return b}},g={l:function(a,c){for(var b=c.start-1,d=a.charAt(b),e=s,f=0,g="";d;){if(" "<d){e=!1;break}else if("\n"===d||"\r"===d)break;b-=1;d=a.charAt(b)}f=b+1;if(e){b=a.r(c.end);for(d=a.charAt(b);d;){if(" "<d){e=!1;break}else if("\n"===d||"\r"===d){"\r"===d&&"\n"===a.charAt(b+1)&&(b.value+=1);break}b.value+=1;d=a.charAt(b)}e&&(g=a.substring(f,c.start),a.replace({g:f,
end:c.start}),a.replace({g:c.end,end:b+1}))}return g},k:function(a,c,b){a.replace({g:c.start.value,end:c.end.value,j:b||""})},w:function(a,c,b){g.l(a,c);a.replace({g:c.start.value,end:c.end.value,j:b||""})},v:function(a){var c=a.c,b=a.data,d=a.d,f=a.a,a=a.b,g=0,k=0,j="",l=u,m=!1;t.isArray(b)||(b=b?[b]:[]);k=b.length;for(g=0;g<k;g+=1)l=b[g],m=!1,f.push(l),l&&"function"===typeof l.valueOf&&l.valueOf!==e&&(m=s,l=l.valueOf(),f.push(l)),"function"===typeof l&&(m=s,l=l(),f.push(l)),l=h.f({c:"="+c+"=",data:l,
a:f,b:a,d:d}),j+=l.substring(1,l.length-1),f.pop(),m&&f.pop();return j}},d={D:function(a){var c=a.c,b=a.h,d=a.data,e=a.a,a=a.b,d=h.f({c:"function"===typeof d?d():d,data:e.e(),a:e,b:a});g.k(c,b,d)},I:function(a){var c=a.c,b=a.h,a=a.d;a.left=b.left;a.right=b.right;g.w(c,b)},m:function(a){var d=a.c,b=a.h,e=a.a,a=a.b,f=c.m({name:b.value,a:e,b:a});(f=h.f({c:f,data:e.e(),a:e,b:a}))?(f=t.C(f.toString()),g.k(d,b,f)):g.k(d,b)},J:function(a){var d=a.c,b=a.h,e=a.a,a=a.b,f=c.m({name:b.value,a:e,b:a});(f=h.f({c:f,
data:e.e(),a:e,b:a}))?g.k(d,b,f+""):g.k(d,b)},H:function(a){var c=a.c,b=a.h,d=a.data,e=a.a,a=a.b,f="",k=g.l(c,b),j=a[b.value];j&&(j=j.toString(),k&&(j=t.F(j,k)),f=h.f({c:j,data:d,a:e,b:a}));g.k(c,b,f)},p:function(a){var d=a.c,b=a.h,e=a.a,f=a.b,a=a.d,q=b.n,k=u,j=u,l={};g.l(d,q);g.l(d,b);k=d.substring(b.start+b.text.length,q.end-q.text.length);j=c.p({name:b.value,q:k,a:e,d:a,b:f,result:l});l.G&&"string"===typeof j?(j=h.f({c:j,data:e.e(),a:e,d:a,b:f}),d.replace({g:b.start,end:q.end,j:j})):!j||t.isArray(j)&&
!j.length?d.replace({g:b.start,end:q.end}):d.replace({g:b.start,end:q.end,j:g.v({c:k,data:j,a:e,b:f,d:a})})},o:function(a){var d=a.c,b=a.h,e=a.a,f=a.b,a=a.d,h=b.n,k=u,j=u;g.l(d,h);g.l(d,b);k=d.substring(b.start+b.text.length,h.end-h.text.length);j=c.o({name:b.value,q:k,d:a,b:f,a:e});j=!j||t.isArray(j)&&!j.length?s:!1;!j||t.isArray(j)&&!j.length?d.replace({g:b.start,end:h.end}):d.replace({g:b.start,end:h.end,j:g.v({c:k,data:j,a:e,b:f,d:a})})}};f.s=c;h={f:function(a){var c=B(a.c?a.c.toString():""),
b=a.b||{},e=a.data||{},f=y(c),h=a.d||{left:"{{",right:"}}"},a=a.a||v(),k=u,b={c:c,data:e,a:a,b:b,d:h};a.push(e);for(k=f.next(h);k;){b.h=k;switch(k.type){case "implicit":d.D(b);break;case "comment":g.w(c,k);break;case "set-delimiter":d.I(b);break;case "interpolation":d.m(b);break;case "unescape-interpolation":d.J(b);break;case "partial":d.H(b);break;case "section-begin":d.p(b);break;case "invert-section-begin":d.o(b);break;case "text":break;default:throw Error('Unexpected token: "'+k.text+'" on line '+
k.i);}k=f.next(h)}if(f.B())throw k=f.A(),Error('Missing section-end for : "'+k.text+'" on line '+k.i);a.pop();return c.toString()}};return f}(),z={inspect:function(f,h,e,c){function g(a,c){var d=a.value.split("."),g=d.pop(),h=q.e(),i=a.n,i=f.substring(a.start+a.text.length,i.end-i.text.length);d.length&&(h=c({name:d.join("."),q:i,d:p,b:e,a:q}),a.value+="."+g);return{e:function(){return h},get:function(){var a;h&&(a=h[g]);return a&&a.valueOf!==b&&typeof a.valueOf==="function"?a.valueOf():a},set:function(a){if(h)if(typeof a===
"function")h[g](a);else h[g]=a}}}function d(a){var a=a.value.split("."),c=a.pop(),d=q.e();a.length&&(d=w.s.m({name:a.join("."),a:q,b:e}));return{e:function(){return d},get:function(){var a;d&&(a=d[c]);return a&&a.valueOf!==b&&"function"===typeof a.valueOf?a.valueOf():a},set:function(a){if(d)if("function"===typeof d[c])d[c](a);else d[c]=a}}}function a(){var a=q.e();return{e:function(){return a},get:function(){return a&&a.valueOf!==b&&"function"===typeof a.valueOf?a.valueOf():a},set:function(b){"function"===
typeof a&&a(b)}}}for(var i=[],b={}.valueOf,n=y(f),p=c||{left:"{{",right:"}}"},c=n.next(p),q=v(h);c;){switch(c.type){case "implicit":i.push(a());break;case "interpolation":case "unescape-interpolation":i.push(d(c));break;case "section-begin":i.push(g(c,w.s.p));break;case "invert-section-begin":i.push(g(c,w.s.o))}c=n.next(p)}return i},render:function(f,h,e,c){return w().f(f,h,e,c)}};xport.module(z,function(){xport("MUSTACHE",z)})})();
